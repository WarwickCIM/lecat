<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Console • lecat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Console">
<meta property="og:description" content="lecat">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lecat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Console.html">Console</a>
    </li>
    <li>
      <a href="../articles/WebApp.html">Web app</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Console_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Console</h1>
            
      
      
      <div class="hidden name"><code>Console.Rmd</code></div>

    </div>

    
    
<p>LE-CAT is an R package. All of functionality available in the shiny app are available via the R console. Below we go through how to carry out an analysis using the console.</p>
<p>LE-CAT requires three excel files for input:</p>
<ul>
<li>
<strong>Corpus</strong>. The text to be searched. Columns need column names and these must be unique</li>
<li>
<strong>Lexicon</strong>. The query terms you wish to search for and the associated categories and types.</li>
<li>
<strong>Lookup table</strong>. LE-CAT allows you to search for different types in different columns of the corpus.</li>
</ul>
<div id="example-data" class="section level2">
<h2 class="hasAnchor">
<a href="#example-data" class="anchor"></a>Example data</h2>
<p>The shiny app allows you to download an example lexicon, corpus and lookup table</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">lecat</span>)
<span class="no">example_lexicon</span> <span class="kw">&lt;-</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tribble</a></span>(
  ~<span class="no">Type</span>,          ~<span class="no">Category</span>,     ~<span class="no">Query</span>,           ~<span class="no">Query1</span>,        ~<span class="no">Query2</span>,
  <span class="st">'technology'</span>,   <span class="st">'Apple'</span>,       <span class="st">'iphone'</span>,         <span class="st">'iPad'</span>,         <span class="st">'imac'</span>,
  <span class="st">'influencers'</span>,  <span class="st">'CIM'</span>,         <span class="st">'Noortje Marres'</span>, <span class="st">'James Tripp'</span>,  <span class="st">''</span>
)

<span class="no">example_corpus</span> <span class="kw">&lt;-</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tribble</a></span>(
  ~<span class="no">title</span>,                           ~<span class="no">description</span>,
  <span class="st">'James Tripp talks about LE-CAT'</span>, <span class="st">'In this iphone and ipad delivered lecture James talks about a new tool.'</span>,
  <span class="st">'Noortje Marres Interview'</span>,       <span class="st">'An interesting interview'</span>,
  <span class="st">'New iphone'</span>,                     <span class="st">'Apple has launched a series of iphones, ipads and imacs.'</span>
)

<span class="no">example_lookup_table</span> <span class="kw">&lt;-</span> <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tribble</a></span>(
  ~<span class="no">Type</span>, ~<span class="no">Column</span>,
  <span class="st">'technology'</span>, <span class="st">'description'</span>,
  <span class="st">'influencers'</span>, <span class="st">'title'</span>
)</pre></body></html></div>
<p>The corpus is a series of entries (e.g., Tweets, YouTube descriptions, etc.). In the example corpus, there is a title and description column.</p>
<table class="table">
<colgroup>
<col width="35%">
<col width="65%">
</colgroup>
<thead><tr class="header">
<th>title</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>James Tripp talks about LE-CAT</td>
<td>In this iphone and ipad delivered lecture James talks about a new tool.</td>
</tr>
<tr class="even">
<td>Noortje Marres interview</td>
<td>An interesting interview</td>
</tr>
<tr class="odd">
<td>New iphone</td>
<td>Apple has launched a series of iphones, ipads and imacs.</td>
</tr>
</tbody>
</table>
<p>The lexicon contains the queries you wish to look for, the categories associated with the queries and the type of category. The lexicon is in a wide form.</p>
<table class="table">
<thead><tr class="header">
<th>Type</th>
<th>Category</th>
<th>Query</th>
<th>Query1</th>
<th>Query2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>technology</td>
<td>Apple</td>
<td>iphone</td>
<td>iPad</td>
<td>imac</td>
</tr>
<tr class="even">
<td>influencers</td>
<td>CIM</td>
<td>Noortje Marres</td>
<td>James Tripp</td>
<td></td>
</tr>
</tbody>
</table>
<p>The above lexicon will instruct LE-CAT to search for the terms iphone, iPad, imac, Noortje Marres and James Tripp. The presence of the queries iphone, iPad and imac indicate that the Category Apple is present in the corpus.</p>
<p>In the example data, we want to search for queries associateed with Apple in the descriptions column of the corpus and the CIM queries in the title column of the corpus. The lookup table tells LE-CAT which column of the corpus to search in.</p>
<table class="table">
<thead><tr class="header">
<th>Type</th>
<th>Column</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>technology</td>
<td>description</td>
</tr>
<tr class="even">
<td>influencers</td>
<td>title</td>
</tr>
</tbody>
</table>
<p>Which tells LE-CAT to:</p>
<ul>
<li>search for technology queries in the description column of the corpus</li>
<li>search for influencers queries in the title column of the corpus</li>
</ul>
</div>
<div id="parse-lexicon" class="section level2">
<h2 class="hasAnchor">
<a href="#parse-lexicon" class="anchor"></a>Parse lexicon</h2>
<p>A wide format lexicon (as shown in the example data) is structure I find easier to teach with. This wide format needs to be changed to a long format (wish one query per row) using the parse_lexicon function.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">lexicon</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/parse_lexicon.html">parse_lexicon</a></span>(<span class="no">example_lexicon</span>)
<span class="no">lexicon</span></pre></body></html></div>
</div>
<div id="query-searching" class="section level2">
<h2 class="hasAnchor">
<a href="#query-searching" class="anchor"></a>Query searching</h2>
<p>LE-CAT searches for terms in the corpus text. You may wish to specify a different search column for each Type. The search column for each type is specified in the lookup table.</p>
<p>To carry out your search of the corpus, pass the long form lexicon, the search data frame and corpus to the run_lecat_analysis function.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">lecat_result</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/run_lecat_analysis.html">run_lecat_analysis</a></span>(<span class="kw">lexicon</span> <span class="kw">=</span> <span class="no">lexicon</span>,
                                   <span class="kw">corpus</span> <span class="kw">=</span> <span class="no">example_corpus</span>,
                                   <span class="kw">searches</span> <span class="kw">=</span> <span class="no">example_lookup_table</span>,
                                   <span class="kw">regex_expression</span> <span class="kw">=</span> <span class="st">'\\Wquery\\W'</span>)</pre></body></html></div>
<p>Note that you can pass your own regex expression. The function replaces the text ‘query’ with the relevent search query. The above searches for cases where there are non-word characters (e.g., spaces or periods) located on either side of the search query.</p>
<p>The query result is a table like the below</p>
<table class="table">
<thead><tr class="header">
<th>Type</th>
<th>Category</th>
<th>Query</th>
<th>Column_examined</th>
<th>V1</th>
<th>V2</th>
<th>V3</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>technology</td>
<td>Apple</td>
<td>iphone</td>
<td>description</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>technology</td>
<td>Apple</td>
<td>ipad</td>
<td>description</td>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>technology</td>
<td>Apple</td>
<td>imac</td>
<td>description</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td>influencers</td>
<td>CIM</td>
<td>noortje marres</td>
<td>title</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>influencers</td>
<td>CIM</td>
<td>James Tripp</td>
<td>title</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>where V1 and V2 are the ids specified above for each entry in the corpus.</p>
</div>
<div id="diagnostics" class="section level2">
<h2 class="hasAnchor">
<a href="#diagnostics" class="anchor"></a>Diagnostics</h2>
<p>The LE-CAT raw count data shown above may be hard for one to process. The above can be summarised into a diagnostic file using the create_unique_total_diagnostics function</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">diagnostics</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/create_unique_total_diagnostics.html">create_unique_total_diagnostics</a></span>(<span class="no">lecat_result</span>)</pre></body></html></div>
<p>to create a table like so</p>
<table class="table">
<thead><tr class="header">
<th>Type</th>
<th>Category</th>
<th>Queries</th>
<th>Column_examined</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>technology(2,1)</td>
<td>Apple(2,1)</td>
<td>iphone(1,1) ipad(1,1) imac(0,0)</td>
<td>description</td>
</tr>
<tr class="even">
<td>influencers(0,0)</td>
<td>CIM(0,0)</td>
<td>noortje marres(0,0) james tripp(0,0)</td>
<td>title</td>
</tr>
</tbody>
</table>
<p>where the first number in the brackets is the total occurance and second is the number of corpus rows each Type, Category and Query occur in.</p>
</div>
<div id="cooccurance" class="section level2">
<h2 class="hasAnchor">
<a href="#cooccurance" class="anchor"></a>Cooccurance</h2>
<p>You may calculate the cooccurance of queries (irrespective of the corresponding Type and Category) using the create_cooccurrence_graph function</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">cooccurrence</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="../reference/create_cooccurrence_graph.html">create_cooccurrence_graph</a></span>(<span class="kw">lecat_result</span> <span class="kw">=</span> <span class="no">lecat_result</span>)</pre></body></html></div>
<p><strong>Note</strong> Creating the cooccurence graph can take a lot of time depending on the size of corpus and lexicon.</p>
<p>You can calculate cooccurance based on the categories by changing the level argument to ‘Category’.</p>
<p>By default the files ‘result.graphml’ and ‘cotable.csv’ are created in the working directory.</p>
<p>The result.grapml file contains a network of the cooccurences. The Type, Category and Column_examined are attributes of the nodes and the weight of the edges are the cooccurance of the queries. You may view graphml network graphs using the excellent <a href="https://gephi.org">Gephi</a> program. <strong>Note</strong> if you have duplicate edges (where there are edges between node1-node2 and node2-node1 then select merge first withing Gephi).</p>
<p>The cotable.csv file is a table of the cooccurences. This file can be loaded into programs such as Excel, LibreOffice or R.</p>
<p>The create_cooccurrence_graph function returns a list containing the cooccurence table as a data frame and the cooccurence network as an igraph network. The igraph object may be useful as the igraph package contains many functions for calculating statistics on the generated netowrk. You may also plot the object in R using the following command:</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">igraph</span>)
<span class="fu"><a href="https://rdrr.io/r/base/plot.html">plot</a></span>(<span class="no">cooccurrence</span>$<span class="no">graph</span>)</pre></body></html></div>
<p>and view the cooccurance table like so</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">cooccurrence</span>$<span class="no">cotable</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by James Tripp.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
